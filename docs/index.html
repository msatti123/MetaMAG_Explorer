<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMAG Explorer: Comprehensive Metagenome-Assembled Genome Analysis Pipeline</title>
    <style>
        :root {
            --primary-color: #5e35b1;
            --secondary-color: #4fc3f7;
            --tertiary-color: #26a69a;
            --accent-color: #ff9100;
            --light-bg: #f5f5f5;
            --dark-text: #333333;
            --light-text: #ffffff;
            --border-radius: 6px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
		img {
			max-width: 100%;
			height: auto;
		}
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background-color: var(--light-bg);
            padding-bottom: 50px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--light-text);
            padding: 40px 0;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        h2 {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin: 30px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary-color);
        }
        
        h3 {
            font-size: 1.4rem;
            color: var(--tertiary-color);
            margin: 20px 0 10px;
        }
        
        h4 {
            font-size: 1.2rem;
            color: var(--accent-color);
            margin: 15px 0 10px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        ul, ol {
            margin-bottom: 15px;
            padding-left: 25px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        code {
            font-family: 'Courier New', Courier, monospace;
            background-color: #eee;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .highlight {
            background-color: rgba(94, 53, 177, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert {
            background-color: rgba(255, 145, 0, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .workflow-diagram {
            max-width: 100%;
            display: block;
            margin: 20px auto;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .parameter-table th, .parameter-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        
        .parameter-table th {
            background-color: var(--primary-color);
            color: var(--light-text);
        }
        
        .parameter-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
		/* CTA Section Styles */
		.cta-section {
			background: linear-gradient(135deg, #5e35b1, #4fc3f7);
			color: #ffffff;
			padding: 60px 20px;
			margin: 40px 0;
			text-align: center;
			border-radius: 6px;
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
		}

		.cta-content {
			max-width: 800px;
			margin: 0 auto;
		}

		.cta-content h2 {
			color: #ffffff;
			font-size: 2.2rem;
			margin-bottom: 20px;
			font-weight: 700;
		}

		.cta-content p {
			font-size: 1.2rem;
			margin-bottom: 30px;
			opacity: 0.95;
			color: #ffffff;
		}

		.header-buttons {
			display: flex;
			gap: 20px;
			justify-content: center;
			flex-wrap: wrap;
			margin-top: 30px;
		}
		/* Button Styles */
		.btn {
			display: inline-flex;
			align-items: center;
			gap: 10px;
			padding: 15px 35px;
			text-decoration: none;
			border-radius: 50px;
			font-weight: 600;
			font-size: 1.1rem;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.btn:hover {
			transform: translateY(-3px);
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
		}

		.btn-primary {
			background-color: #ff9100;
			color: #ffffff;
		}

		.btn-primary:hover {
			background-color: #ff7043;
		}

		.btn-secondary {
			background-color: rgba(255, 255, 255, 0.2);
			color: #ffffff;
			border: 2px solid rgba(255, 255, 255, 0.5);
		}

		.btn-secondary:hover {
			background-color: rgba(255, 255, 255, 0.3);
			border-color: rgba(255, 255, 255, 0.8);
		}

		.btn-icon {
			width: 20px;
			height: 20px;
			flex-shrink: 0;
		}
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .tab-container {
            margin-bottom: 20px;
        }
        
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .tab-btn {
            background-color: #e0e0e0;
            border: none;
            padding: 10px 20px;
            margin-right: 5px;
            margin-bottom: 5px;
            cursor: pointer;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            font-weight: bold;
        }
        
        .tab-btn.active {
            background-color: var(--primary-color);
            color: var(--light-text);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .toc {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 25px;
            position: sticky;
            top: 20px;
        }
        
        .toc h3 {
            margin-top: 0;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc ul ul {
            padding-left: 20px;
        }
        
        .toc a {
            text-decoration: none;
            color: var(--primary-color);
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 25px;
        }
        
        @media (max-width: 768px) {
		    .cta-section {
                padding: 40px 20px;
			}
			
			.cta-content h2 {
				font-size: 1.8rem;
			}
			
			.cta-content p {
				font-size: 1rem;
			}
			
			.header-buttons {
				flex-direction: column;
				align-items: center;
			}
			
			.btn {
				width: 100%;
				max-width: 300px;
				justify-content: center;
			} 
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .toc {
                position: static;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>MetaMAG Explorer</h1>
            <p>A Comprehensive Metagenome-Assembled Genome Analysis Pipeline</p>
        </div>
    </header>
    
    <div class="container">
        <div class="grid-container">
            <div>
                <div class="toc">
                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#introduction">Introduction</a></li>
                        <li><a href="#pipeline-overview">Pipeline Overview</a></li>
                        <li><a href="#installation">Installation</a></li>
                        <li><a href="#usage">Usage</a>
                            <ul>
                                <li><a href="#config-file">Configuration File</a></li>
                                <li><a href="#command-line">Command Line Interface</a></li>
                                <li><a href="#running-pipeline">Running the Pipeline</a></li>
                            </ul>
                        </li>
                        <li><a href="#pipeline-steps">Pipeline Steps</a>
                            <ul>
                                <li><a href="#data-preprocessing">Data Preprocessing</a></li>
                                <li><a href="#assembly">Assembly</a></li>
                                <li><a href="#binning-refinement">Binning & Refinement</a></li>
                                <li><a href="#novel-mag-detection">Novel MAG Detection</a></li>
                                <li><a href="#functional-annotation">Functional Annotation</a></li>
                                <li><a href="#phylogeny">Phylogeny</a></li>
                                <li><a href="#abundance-estimation">Abundance Estimation</a></li>
                            </ul>
                        </li>
                        <li><a href="#special-features">Special Features</a>
                            <ul>
                                <li><a href="#rumen-mags">Rumen MAGs Processing</a></li>
                                <li><a href="#kraken-db">Kraken Database Integration</a></li>
                            </ul>
                        </li>
                        <li><a href="#output-files">Output Files</a></li>
                        <li><a href="#faq">FAQ</a></li>
                        <li><a href="#troubleshooting">Troubleshooting</a></li>
                        <li><a href="#references">References</a></li>
                    </ul>
                </div>
            </div>
            
            <div>
                <section id="introduction" class="card">
                    <h2>Introduction</h2>
                    <p>MetaMAG Explorer is a comprehensive pipeline designed for the identification, processing, and analysis of Metagenome-Assembled Genomes (MAGs) from metagenomic data. This pipeline excels in detecting novel MAGs and integrating them into reference databases, with specialized handling for rumen microbiome data.</p>
                    
                    <p>The pipeline incorporates state-of-the-art tools for quality control, assembly, binning, and functional annotation, providing a complete solution for metagenomic analysis from raw reads to functionally annotated genomes and phylogenetic placement.</p>
                    
                    <div class="highlight">
                        <h4>Key Features:</h4>
                        <ul>
                            <li><strong>Comprehensive Processing:</strong> End-to-end workflow from raw reads to functionally annotated MAGs</li>
                            <li><strong>Novel MAG Detection:</strong> Specialized modules for identifying and processing novel genomes</li>
                            <li><strong>Rumen Data Support:</strong> Special handling for rumen microbiome data with reference MAG integration</li>
                            <li><strong>Database Integration:</strong> Automatic integration of novel MAGs into Kraken2 databases for future analyses</li>
                            <li><strong>High Performance:</strong> Optimized for HPC environments with SLURM integration</li>
                            <li><strong>Modular Design:</strong> Run specific steps independently or the entire pipeline</li>
                        </ul>
                    </div>
                </section>
                
                <section id="pipeline-overview" class="card">
                    <h2>Pipeline Overview</h2>
                    <p>MetaMAG Explorer is organized into several major modules that can be run sequentially or independently:</p>
                    
                    <img src="images/MetaMAG_Flow.png">
                    
                    <p>The pipeline consists of these main components:</p>
                    
                    <ol>
                        <li><strong>Data Preprocessing:</strong> Quality control, trimming, and host removal</li>
                        <li><strong>Assembly:</strong> Single-sample and co-assembly of metagenomic reads</li>
                        <li><strong>Binning & Refinement:</strong> MAG binning, refinement, dereplication, and evaluation</li>
                        <li><strong>Novel MAG Detection:</strong> Identification and processing of novel MAGs</li>
                        <li><strong>Functional Annotation:</strong> Annotation of MAGs with eggNOG, KEGG, and dbCAN</li>
                        <li><strong>Phylogeny:</strong> Construction and visualization of phylogenetic trees</li>
                        <li><strong>Abundance Estimation:</strong> Quantification of MAG abundance across samples</li>
                    </ol>
                    
                    <h3>Novel MAG Detection & Database Augmentation</h3>
                    <p>A unique feature of this pipeline is its comprehensive novel MAG detection and database integration module:</p>
                    
                    <img src="images/MetaMAG_DB_Flow.png">
                    <p>This specialized workflow identifies novel MAGs, dereplicates them against existing repositories, and integrates them into reference databases for improved future analyses.</p>
                </section>
                
                
                <section id="pipeline-steps" class="card">
                    <h2>Pipeline Steps in Detail</h2>
                    
                    <h3 id="data-preprocessing">Data Preprocessing</h3>
                    <h4>Quality Control</h4>
                    <p>The pipeline begins with quality assessment of raw sequencing reads using FastQC, which generates comprehensive reports on sequence quality, adapter content, and other metrics.</p>
                    
                    <h4>Trimming</h4>
                    <p>Low-quality bases and adapter sequences are removed using Fastp. This step improves assembly quality by removing error-prone regions of reads.</p>
                    
                    <h4>Host Removal</h4>
                    <p>For metagenomes from host-associated environments (e.g., rumen, human gut), the pipeline maps reads against host reference genomes using BWA-mem and removes host-derived sequences. This step is crucial for accurate microbial genome assembly.</p>
                    
                    <h3 id="assembly">Assembly</h3>
                    <h4>Single Sample Assembly</h4>
                    <p>Individual samples are assembled using IDBA-UD, an iterative De Bruijn graph assembler optimized for uneven-depth metagenomic data. This approach works well for capturing dominant genomes in individual samples.</p>
                    
                    <h4>Co-Assembly</h4>
                    <p>Reads from multiple samples are combined and assembled using MEGAHIT, which is memory-efficient and can handle large datasets. Co-assembly improves recovery of low-abundance genomes that may be present across multiple samples.</p>
                    
                    <h4>Assembly Evaluation</h4>
                    <p>MetaQUAST is used to evaluate assembly quality metrics such as N50, total assembly length, and contig length distribution.</p>
                    
                    <h3 id="binning-refinement">Binning & Refinement</h3>
                    <h4>Binning</h4>
                    <p>The pipeline employs multiple binning algorithms to group contigs into putative genomes:</p>
                    <ul>
                        <li><strong>MetaBAT2:</strong> Uses tetranucleotide frequencies and coverage information</li>
                        <li><strong>MaxBin2:</strong> Expectation-maximization algorithm for binning</li>
                        <li><strong>CONCOCT:</strong> Uses sequence composition and coverage across samples</li>
                    </ul>
                    
                    <h4>Bin Refinement</h4>
                    <p>Results from different binning tools are integrated using DAS Tool, which selects the optimal bins from each binning approach to create a non-redundant set of high-quality MAGs.</p>
                    
                    <h4>Dereplication</h4>
                    <p>dRep is used to identify and remove redundant MAGs based on genome similarity, ensuring a non-redundant set of genomes for downstream analysis.</p>
                    
                    <h4>Evaluation</h4>
                    <p>CheckM2 assesses MAG quality by estimating completeness and contamination based on single-copy marker genes. This quality assessment is crucial for identifying high-quality MAGs for further analysis.</p>
                    
                    <h3 id="novel-mag-detection">Novel MAG Detection & Processing</h3>
                    <h4>GTDB-Tk Classification</h4>
                    <p>GTDB-Tk assigns taxonomy to MAGs based on the Genome Taxonomy Database. This step is critical for identifying potentially novel genomes that lack species-level assignments.</p>
                    
                    <h4>Novel MAG Identification</h4>
                    <p>MAGs with missing species-level assignments in GTDB-Tk results are identified as potentially novel. The pipeline extracts these candidates for further processing.</p>
                    
                    <h4>Dereplication Against MAG Repository</h4>
                    <p>Novel MAG candidates are dereplicated against a repository of previously identified MAGs to ensure they represent truly unique genomes not already present in the database.</p>
                    
                    <h4>Rumen-Specific Processing</h4>
                    <p>For rumen data, additional dereplication is performed against dedicated rumen reference MAGs. This ensures that MAGs unique to the rumen microbiome are properly identified and processed.</p>
                    
                    <h4>MAG Repository Update</h4>
                    <p>Verified novel MAGs are added to a central MAG repository for future reference and dereplication.</p>
                    
                    <h4>Kraken Database Integration</h4>
                    <p>The pipeline integrates novel MAGs into a Kraken2 database for improved metagenomic classification in future analyses. This step includes:</p>
                    <ul>
                        <li>Assigning placeholder taxonomy to MAGs with incomplete classifications</li>
                        <li>Converting GTDB taxonomy to NCBI taxdump format</li>
                        <li>Reformatting sequence headers for Kraken2 compatibility</li>
                        <li>Building the Kraken2 database</li>
                    </ul>
                    
                    <h3 id="functional-annotation">Functional Annotation</h3>
                    <h4>eggNOG Annotation</h4>
                    <p>MAGs are functionally annotated using eggNOG-mapper, which assigns orthology groups, KEGG orthology (KO) terms, and Gene Ontology (GO) terms to predicted genes.</p>
                    
                    <h4>CAZyme Annotation</h4>
                    <p>The dbCAN tool is used to identify Carbohydrate-Active Enzymes (CAZymes) in MAGs, which are particularly important for understanding polysaccharide metabolism in the rumen microbiome.</p>
                    
                    <h4>Functional Analysis</h4>
                    <p>KEGG annotations are analyzed to identify key metabolic pathways and functions present in the MAGs, providing insights into their ecological roles.</p>
                    
                    <h3 id="phylogeny">Phylogeny</h3>
                    <h4>Phylogenetic Tree Construction</h4>
                    <p>Phylogenetic trees are constructed based on marker genes to establish evolutionary relationships among the MAGs and reference genomes.</p>
                    
                    <h4>Tree Visualization</h4>
                    <p>Trees are visualized with taxonomic and functional annotations to facilitate interpretation of evolutionary relationships and functional traits.</p>
                    
                    <h3 id="abundance-estimation">Abundance Estimation</h3>
                    <h4>Kraken2-Based Quantification</h4>
                    <p>The updated Kraken2 database, which includes novel MAGs, is used to estimate the abundance of MAGs across samples, providing insights into community composition and dynamics.</p>
                </section>
                
                <section id="special-features" class="card">
                    <h2>Special Features</h2>
                    
                    <h3 id="rumen-mags">Rumen MAGs Processing</h3>
                    <p>The pipeline includes specialized handling for rumen microbiome data:</p>
                    
                    <div class="highlight">
                        <h4>Rumen-Specific Workflow:</h4>
                        <ol>
                            <li><strong>Reference MAG Download:</strong> Automatically downloads reference MAGs from key rumen microbiome projects (RUG, RMGMC, MGnify)</li>
                            <li><strong>Rumen MAG Dereplication:</strong> Dereplicates rumen-specific MAGs to create a non-redundant reference set</li>
                            <li><strong>Rumen-Specific Novel MAG Detection:</strong> Identifies MAGs that are novel compared to existing rumen reference genomes</li>
                            <li><strong>Rumen Reference Integration:</strong> Updates rumen reference MAG collections with newly identified genomes</li>
                        </ol>
                    </div>
                    
                    <p>This specialized handling improves the characterization of the rumen microbiome, which is crucial for understanding feed efficiency, methane emissions, and overall cattle health.</p>
                    
                    <h3 id="kraken-db">Kraken Database Integration</h3>
                    <p>The pipeline's Kraken database integration module enables continuous improvement of metagenomic classification:</p>
                    
                    <div class="highlight">
                        <h4>Key Features:</h4>
                        <ul>
                            <li><strong>Automatic Taxonomy Assignment:</strong> Uses GTDB-Tk results and implements placeholder taxonomy for incomplete classifications</li>
                            <li><strong>Taxonomy Format Conversion:</strong> Converts GTDB taxonomy to NCBI taxdump format required by Kraken2</li>
                            <li><strong>Header Formatting:</strong> Ensures sequence headers contain taxonomy IDs in Kraken2-compatible format</li>
                            <li><strong>Database Building:</strong> Automates the process of adding sequences to the Kraken2 library and building the database</li>
                        </ul>
                    </div>
                    
                    <p>This integration enables improved classification of metagenomic sequences in future analyses by incorporating project-specific novel genomes into the reference database.</p>
                </section>
                
                <section id="output-files" class="card">
                    <h2>Output Files</h2>
                    <p>The pipeline generates a structured output directory containing the following key files and directories:</p>
                    
                    <pre><code>output_dir/
+-- QC/                         # Quality control reports
+-- Trimming/                   # Trimmed read files
+-- Host_Removal/               # Host-filtered read files
+-- Assembly/
¦   +-- IDBA/                   # Single-sample assemblies
¦   +-- MEGAHIT/                # Co-assemblies
+-- MetaQUAST/                  # Assembly quality evaluation
+-- Binning/                    # Raw binning results
+-- Bin_Refinement/             # Refined bins
¦   +-- drep/                   # Dereplicated MAGs
+-- Evaluation/                 # CheckM2 quality assessment
+-- Novel_Mags/
¦   +-- gtdbtk/                 # GTDB-Tk classification results
¦   +-- UniqueMags/             # Candidate novel MAGs
¦   +-- filtered_NMAGs/         # MAGs after repository dereplication
¦   +-- true_novel_MAGs/        # Final set of novel MAGs
+-- MAGs_Repository/            # Central repository of all MAGs
+-- Kraken_Database/            # Kraken2 database with novel MAGs
+-- Functional_Annotation/
¦   +-- eggNOG/                 # eggNOG annotation results
¦   +-- dbCAN/                  # CAZyme annotations
¦   +-- KEGG/                   # KEGG functional analysis
+-- Phylogeny/                  # Phylogenetic trees
+-- Abundance/                  # MAG abundance estimates</code></pre>
                </section>
                <div class="cta-section">
                    <div class="cta-content">
                        <h2>Start Using the MetaMAG Pipeline</h2>
                        <p>Follow the installation steps and run the pipeline to process your metagenomic data from raw reads to annotated genomes. You can run all steps or just the parts you need.</p>
                        <div class="header-buttons">
                            <a href="installation.html" class="btn btn-primary">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                                </svg>
                                Install Now
                            </a>
                            <a href="user-guide.html" class="btn btn-secondary">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 12h6M9 16h6M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2z"/>
                                </svg>
                                Read Documentation
                            </a>
                        </div>
                    </div>
                </div>

                <section id="faq" class="card">
                    <h2>Frequently Asked Questions</h2>
                    
                    <div class="tab-container">
                        <div class="tab-buttons">
                            <button class="tab-btn active" onclick="openTab(event, 'general-faq')">General</button>
                            <button class="tab-btn" onclick="openTab(event, 'rumen-faq')">Rumen Data</button>
                            <button class="tab-btn" onclick="openTab(event, 'performance-faq')">Performance</button>
                        </div>
                        
                        <div id="general-faq" class="tab-content active">
                            <h4>Q: What types of metagenomic data can be processed with this pipeline?</h4>
                            <p>A: MetaMAG Explorer can process shotgun metagenomic data from any environment, with specialized features for host-associated microbiomes, particularly the rumen microbiome.</p>
                            
                            <h4>Q: What is the minimum sequencing depth required?</h4>
                            <p>A: For optimal MAG recovery, we recommend at least 5-10 Gbp of sequencing data per sample. However, the co-assembly approach can help recover genomes from samples with lower sequencing depth.</p>
                            
                            <h4>Q: How does the pipeline define "novel" MAGs?</h4>
                            <p>A: MAGs are considered potentially novel if they lack a species-level classification in GTDB-Tk results (indicated by "s__" in the taxonomy string). They are confirmed as novel if they pass dereplication against existing MAG repositories.</p>
                        </div>
                        
                        <div id="rumen-faq" class="tab-content">
                            <h4>Q: What reference MAG collections are used for rumen data?</h4>
                            <p>A: The pipeline can incorporate MAGs from major rumen microbiome projects including RUG (Rumen Uncultured Genomes), RMGMC (Rumen Microbial Genomics Multi-Country), and MGnify rumen MAGs.</p>
                            
                            <h4>Q: How does rumen-specific processing differ from standard processing?</h4>
                            <p>A: Rumen-specific processing includes additional dereplication against established rumen reference MAGs and maintains a separate collection of rumen-specific novel MAGs for future reference.</p>
                            
                            <h4>Q: Can I use the pipeline for other host-associated microbiomes?</h4>
                            <p>A: Yes, the pipeline can be adapted for other host-associated microbiomes by providing the appropriate host reference genome for host removal and reference MAG collections for dereplication.</p>
                        </div>
                        
                        <div id="performance-faq" class="tab-content">
                            <h4>Q: What computational resources are required?</h4>
                            <p>A: Resource requirements vary by step and dataset size. As a general guideline:
                                <ul>
                                    <li>Assembly: 100-200 GB RAM for co-assembly of multiple samples</li>
                                    <li>Binning: 32-64 GB RAM</li>
                                    <li>GTDB-Tk: 100-200 GB RAM</li>
                                    <li>Storage: 1-5 TB for a typical project with 20-50 samples</li>
                                </ul>
                            </p>
                            
                            <h4>Q: How long does the complete pipeline take to run?</h4>
                            <p>A: Runtime depends on dataset size and available computational resources. For a typical dataset (20 samples), expect:
                                <ul>
                                    <li>Preprocessing: 1-2 hours per sample</li>
                                    <li>Assembly: 4-24 hours per sample or co-assembly</li>
                                    <li>Binning and refinement: 2-6 hours</li>
                                    <li>GTDB-Tk classification: 1-3 hours</li>
                                    <li>Novel MAG processing: 2-4 hours</li>
                                    <li>Functional annotation: 4-8 hours</li>
                                </ul>
                                Total runtime is typically 2-7 days for a complete analysis.
                            </p>
                        </div>
                    </div>
                </section>
                
                <section id="troubleshooting" class="card">
                    <h2>Troubleshooting</h2>
                    
                    <div class="alert">
                        <h4>Common Issues and Solutions</h4>
                        
                        <h4>SLURM Job Failures</h4>
                        <p><strong>Issue:</strong> Jobs fail with out-of-memory errors.</p>
                        <p><strong>Solution:</strong> Increase the memory allocation in the <code>--memory</code> parameter or reduce the batch size.</p>
                        
                        <h4>GTDB-Tk Classification Errors</h4>
                        <p><strong>Issue:</strong> GTDB-Tk fails with database-related errors.</p>
                        <p><strong>Solution:</strong> Ensure the GTDB-Tk database is properly installed and the environment variable GTDBTK_DATA_PATH is set correctly.</p>
                        
                        <h4>dRep Failures</h4>
                        <p><strong>Issue:</strong> dRep fails during genome comparison.</p>
                        <p><strong>Solution:</strong> Check if input MAGs meet minimum quality requirements (completeness > 50%, contamination < 10%). Increase memory allocation for dRep.</p>
                        
                        <h4>Kraken Database Build Failures</h4>
                        <p><strong>Issue:</strong> Kraken database building fails.</p>
                        <p><strong>Solution:</strong> Ensure sufficient disk space for the database. Check if the taxonomy files (nodes.dmp, names.dmp) are properly formatted.</p>
                    </div>
                    
                    <p>For additional troubleshooting and support, please open an issue in the GitHub repository or contact the developers directly.</p>
                </section>
                
                <section id="references" class="card">
                    <h2>References</h2>
                    
                    <h3>Pipeline and Methodology</h3>
                    <ul>
                        <li>Stewart RD, Auffret MD, Warr A, et al. (2018). <em>Assembly of 913 microbial genomes from metagenomic sequencing of the cow rumen.</em> Nature Communications, 9(1), 870.</li>
                        <li>Parks DH, Chuvochina M, Rinke C, et al. (2022). <em>GTDB: an ongoing census of bacterial and archaeal diversity through a phylogenetically consistent, rank normalized and complete genome-based taxonomy.</em> Nucleic Acids Research, 50(D1), D785-D794.</li>
                    </ul>
                    
                    <h3>Tools Used</h3>
                    <ul>
                        <li>Peng Y, Leung HC, Yiu SM, Chin FY. (2012). <em>IDBA-UD: a de novo assembler for single-cell and metagenomic sequencing data with highly uneven depth.</em> Bioinformatics, 28(11), 1420-1428.</li>
                        <li>Li D, Liu CM, Luo R, Sadakane K, Lam TW. (2015). <em>MEGAHIT: an ultra-fast single-node solution for large and complex metagenomics assembly via succinct de Bruijn graph.</em> Bioinformatics, 31(10), 1674-1676.</li>
                        <li>Kang DD, Li F, Kirton E, et al. (2019). <em>MetaBAT 2: an adaptive binning algorithm for robust and efficient genome reconstruction from metagenome assemblies.</em> PeerJ, 7, e7359.</li>
                        <li>Alneberg J, Bjarnason BS, de Bruijn I, et al. (2014). <em>Binning metagenomic contigs by coverage and composition.</em> Nature Methods, 11(11), 1144-1146.</li>
                        <li>Sieber CMK, Probst AJ, Sharrar A, et al. (2018). <em>Recovery of genomes from metagenomes via a dereplication, aggregation and scoring strategy.</em> Nature Microbiology, 3(7), 836-843.</li>
                        <li>Olm MR, Brown CT, Brooks B, Banfield JF. (2017). <em>dRep: a tool for fast and accurate genomic comparisons that enables improved genome recovery from metagenomes through de-replication.</em> The ISME Journal, 11(12), 2864-2868.</li>
                        <li>Chaumeil PA, Mussig AJ, Hugenholtz P, Parks DH. (2020). <em>GTDB-Tk: a toolkit to classify genomes with the Genome Taxonomy Database.</em> Bioinformatics, 36(6), 1925-1927.</li>
                        <li>Wood DE, Lu J, Langmead B. (2019). <em>Improved metagenomic analysis with Kraken 2.</em> Genome Biology, 20(1), 257.</li>
                        <li>Huerta-Cepas J, Forslund K, Coelho LP, et al. (2017). <em>Fast genome-wide functional annotation through orthology assignment by eggNOG-mapper.</em> Molecular Biology and Evolution, 34(8), 2115-2122.</li>
                        <li>Zhang H, Yohe T, Huang L, et al. (2018). <em>dbCAN2: a meta server for automated carbohydrate-active enzyme annotation.</em> Nucleic Acids Research, 46(W1), W95-W101.</li>
                    </ul>
                </section>
            </div>
        </div>
    </div>
    
    <footer>
        <p>MetaMAG Explorer &copy; 2025 | Documentation Generated: May 10, 2025</p>
    </footer>
    
    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tabbuttons;
            
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].className = tabcontent[i].className.replace(" active", "");
            }
            
            tabbuttons = document.getElementsByClassName("tab-btn");
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }
            
            document.getElementById(tabName).className += " active";
            evt.currentTarget.className += " active";
        }
    </script>
</body>
</html>